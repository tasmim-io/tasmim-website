@use "../../sass/index" as *;

.mobileMenu {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  // Use the same semi-transparent blurred background as the main navbar
  background-color: rgba(5, 5, 5, 0.95); // Slightly more opaque for readability
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  z-index: 999;
  display: flex;
  flex-direction: column;
  justify-content: flex-start; // Start from top
  align-items: flex-start; // Align left
  opacity: 0;
  transform: translateY(-100%); // Start off-screen (top)
  pointer-events: none;
  transition:
    transform 0.5s cubic-bezier(0.65, 0, 0.35, 1),
    // Smoother cubic-bezier
    opacity 0.4s ease;
  padding: 100px 0; // Add top padding to clear header

  &.open {
    opacity: 1;
    transform: translateY(0); // Slide in
    pointer-events: all;

    // Stagger animation for children
    .mobileNavLink,
    .mobileCta {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @include respond-to("tablet") {
    display: none;
  }
}

.mobileNav {
  display: flex;
  flex-direction: column;
  align-items: flex-start; // Align items left
  gap: space(4);
  width: 100%;
}

.mobileNavLink {
  width: 100%;
  @include typography("heading-section", "mobile");
  line-height: 1.2 !important;
  font-weight: 500;
  color: color("text-inverse");
  text-decoration: none;
  padding: space(2) space(6);

  transition:
    color 0.2s ease,
    transform 0.5s cubic-bezier(0.16, 1, 0.3, 1),
    opacity 0.5s ease;
  transform: translateY(20px); // Start slightly down
  opacity: 0;

  &:hover {
    color: color("accent-primary");
  }

  // Stagger delays
  @for $i from 1 through 5 {
    &:nth-child(#{$i}) {
      transition-delay:
        0s,
        #{$i * 0.05 + 0.2}s,
        #{$i * 0.05 + 0.2}s;
    }
  }
}

.mobileCta {
  display: flex;
  justify-content: flex-start;
  width: 100%;
  transform: translateY(20px);
  opacity: 0;
  transition:
    transform 0.5s cubic-bezier(0.16, 1, 0.3, 1) 0.4s,
    opacity 0.5s ease 0.4s;
  padding: space(2) space(6);
  color: color("accent-light");

  a {
    // Reset any previous overrides
    all: unset;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding-bottom: 4px;
    cursor: pointer;

    span {
      display: block;
      @include typography("heading-section", "mobile"); // Standard button font size
      line-height: 1.2;
      font-weight: 500;

      &::after {
        display: none;
      }
    }

    &:hover {
      color: color("accent-primary");
    }
  }
}
